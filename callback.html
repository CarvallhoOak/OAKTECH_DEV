<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Callback - Google OAuth</title>
  <style>
    body { font-family: Arial; text-align:center; margin-top:50px; }
    button { padding:12px 20px; background:#4285F4; color:#fff; border:none; border-radius:6px; }
  </style>
</head>
<body>
  <h2>Aguarde...</h2>
  <p>Finalizando autorização</p>
  <script>
    (function(){
      const params = new URLSearchParams(window.location.search);
      const code = params.get('code');
      const error = params.get('error');

      if (code) {
        // envia o code para o Android via JSInterface
        if (typeof Android !== 'undefined' && Android.sendCode) {
          Android.sendCode(code);
        }
        // mostra botão para voltar
        document.body.innerHTML = "<h2>Autorizado com sucesso!</h2><p>Toque voltar para continuar.</p><button onclick=\"if(typeof Android!=='undefined' && Android.backToApp) Android.backToApp();\">Voltar para o app</button>";
      } else {
        document.body.innerHTML = "<h2>Erro no OAuth</h2><p>" + (error ? error : "Sem code recebido") + "</p>";
      }
    })();
  </script>
</body>
</html>
